<%- include('./partials/nav.ejs') %>

<head>
  <link rel="shortcut icon" href="/img/favicon.png">
  <title>Mercancía</title>
  <link rel="stylesheet" href="styleTables.css">
 <link rel="stylesheet" href="https://cdn.datatables.net/1.11.1/css/dataTables.bootstrap5.min.css">
 <link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.1.9/css/fixedHeader.bootstrap.min.css">
 <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="container">
    <div class="row justify-content-center ">
        <div class="col-lg-12 col-md-12 col-sm-12 pb-4">
            <div class="card m-sm-2 p-sm-3 p-md-3"
                style=" box-shadow: -0.843887px 1.81324px 156px rgba(0, 0, 0, 0.05), -0.496881px 1.06764px 81.3696px rgba(0, 0, 0, 0.03616), -0.255191px 0.548325px 38.1888px rgba(0, 0, 0, 0.02808), -0.102617px 0.220491px 16.7232px rgba(0, 0, 0, 0.02192), -0.0229537px 0.0493202px 7.2384px rgba(0, 0, 0, 0.01384);">
                <div class="card-title text-center">
                    <h2 class="p-3 ">historial estatus</h2>
                </div>
                <div class="card-body ">
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <h5 class="p-3 bg-dark bg-gradient col-lg-5 d-flex justify-content-center" style="color: white; border-radius: 10px; "> <i style="font-size: 24px; margin-right:5px;" class='bx bx-qr' ></i> <%= dataMerc[0].awb %></h3>
                    </div>
                </div>
        
                </div>
                    
            </div>
        </div>
  <div class="row">
   
    
    <table id="users" class="table table-light table-striped table-hover table-bordered text-center  " style="font-size: 14px;">
      <thead>
        <tr>
        <th>ID</th>
        <th>AWB</th>
        <th>Estatus</th>
        <th>fecha del estatus</th>
        <th>observaciones</th>
        
       
      </tr>
      </thead>

      <tbody>
        <% results.forEach((user) => {%>
        <tr>
          <td><%= user.id %> </td>
          <% dataMerc.forEach((database)=>{ %> 
          <% if(user.awbID == database.id){ %>
          <td><%= database.awb %></td>
            <% } %> 
            <% }) %> 
            <td><%= user.estatusHistorial %></td> 
          <td><%= user.fecha %></td>
          
          <td><textarea class="form-control" readonly><%= user.observaciones %></textarea></td>
          
        </tr>
        <% }) %>
      </tbody>
    </table>

  </div>
</div>
</body>

<script src="https://code.jquery.com/jquery-3.5.1.js"  ></script>
<script src="https://cdn.datatables.net/1.11.1/js/jquery.dataTables.min.js" defer></script>
<script src="https://cdn.datatables.net/1.11.1/js/dataTables.bootstrap5.min.js" defer></script>
<script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js" defer></script>
<script src="https://cdn.datatables.net/responsive/2.2.9/js/responsive.bootstrap.min.js" defer></script>
<script>
 $(document).ready(function() {
    var table = $('#users').DataTable( {
        responsive: true
    } );
 
    new $.fn.dataTable.FixedHeader( table );
} );
    
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.all.min.js"></script>
<script>
  function alertDelate(id) {
    Swal.fire({
      title: '¿Quieres eliminar este usuario?',
      icon: 'warning',
      showCancelButton: true,
      cancelButtonText: 'NO',
      cancelButtonColor: '#d33' ,
      confirmButtonColor:'#3085d6' ,
      confirmButtonText: ` SI `,
    }).then((result) => {
      /* Read more about isConfirmed, isDenied below */
      if (result.isConfirmed) {
        Swal.fire('Usuario eliminado exitosamente', '', 'success',1500)
        const value = true
        setTimeout(timeUot, 2000, value, id);
      } 
    })
  }
  function timeUot (values, id){
    if(values){
      window.location='/registerUsersDelate/'+ id
    }
    
  }
</script>
<%- include('./partials/footer.ejs') %>

<script src="https://unpkg.com/boxicons@2.0.9/dist/boxicons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

</html>