<%- include('./partials/nav.ejs') %> 


<link rel="stylesheet" href="css/styleLogin.css">

<body class="login">


        <div class="container"  style="margin-top: 70px;">
            <div class="row justify-content-center ">
                <div class="col-lg-5 col-md-6 col-sm-6 pb-4">
                    <div class="card m-sm-2 p-sm-3 p-md-3"
                        style=" box-shadow: -0.843887px 1.81324px 156px rgba(0, 0, 0, 0.05), -0.496881px 1.06764px 81.3696px rgba(0, 0, 0, 0.03616), -0.255191px 0.548325px 38.1888px rgba(0, 0, 0, 0.02808), -0.102617px 0.220491px 16.7232px rgba(0, 0, 0, 0.02192), -0.0229537px 0.0493202px 7.2384px rgba(0, 0, 0, 0.01384);">
                        <div class="card-title text-center">
                            <h2 class="p-3 ">estatus de la mercancía actualmente</h2>
                        </div>
                        <div class="card-body ">
                            <form action="/sendMercancia" method="POST">
                                <% if(typeof results1 !="undefined" ) { %>
                                    <div class="mb-3 ">
                                        <h5 for="usuario ">AWB de la mercancía</h5>
                                        <input type="text " class="form-control" name="AWB" placeholder="<%= results3[0].awb %>" readonly>
                                    </div>
                                    <div class="mb-3 ">
                                        <h5 for="usuario ">AWB de la mercancía</h5>
                                        <input type="text " class="form-control" name="HAWB" placeholder="<%= results3[0].hawb %>" readonly>
                                    </div>
                                <div class="mb-3 ">
                                    <h5 for="usuario">Estatus</h5>
                                    <input type="text" name="status" class="form-control" placeholder="<%= results1[0].estatusHistorial %>" readonly>
                                </div>
                                <div class="mb-3 ">
                                    <h5 for="usuario ">Nombre de la mercancía</h5>
                                    <input type="text " class="form-control" name="name" placeholder="<%= results3[0].name %>" readonly>
                                </div>     
                                <div class="mb-3 ">
                                    <h5 for="usuario ">Cliente propietario</h5>
                                    <input type="text " class="form-control" name="cliente" placeholder="<%= results3[0].cliente %>" readonly>
                                </div>      
                                <div class="mb-3 ">
                                    <h5 for="usuario ">Fecha de ingreso de la mercancía</h5>
                                    <input type="date" class="form-control" name="fecha" value="<%= results1[0].fecha %>" readonly>
                                </div>
                                <div class="mb-3 ">
                                    <h5 for="usuario ">Observaciones</h5>
                                    <textarea id="" class="form-control" readonly><%= results1[0].observaciones %></textarea>
                                </div>                     
                                <% } %> 
                                <% if(typeof results2 !="undefined" ) { %>
                                    <div class="mb-3 ">
                                        <h5 for="usuario ">AWB/HAWB de la mercancía</h5>
                                        <input type="text " class="form-control" name="AWB" placeholder="<%= results2[0].awb %>" readonly>
                                    </div>
                                    <div class="mb-3 ">
                                        <h5 for="usuario">Estatus</h5>
                                        <input type="text" name="status" class="form-control" placeholder="<%= results2[0].status %>" readonly>
                                    </div>
                                    <div class="mb-3 ">
                                        <h5 for="usuario ">Nombre de la mercancía</h5>
                                        <input type="text " class="form-control" name="name"  placeholder="<%= results2[0].name %>" readonly>
                                    </div>     
                                    <div class="mb-3 ">
                                        <h5 for="usuario ">Cliente propietario</h5>
                                        <input type="text " class="form-control" name="cliente" placeholder="<%= results2[0].cliente %>" readonly>
                                    </div>      
                                    <div class="mb-3 ">
                                        <h5 for="usuario ">Fecha de ingreso de la mercancía</h5>
                                        <input type="text" class="form-control" name="fecha" value="<%= results2[0].fecha %>" readonly>
                                    </div>                 
                                    <% } %> 
                            
                        </div>
                        
                        </form>
                    </div>
                </div>





                <div class="col-lg-5 col-md-6 col-sm-6 pb-4">
                    <div class="card m-sm-2 p-sm-3 p-md-3"
                        style=" box-shadow: -0.843887px 1.81324px 156px rgba(0, 0, 0, 0.05), -0.496881px 1.06764px 81.3696px rgba(0, 0, 0, 0.03616), -0.255191px 0.548325px 38.1888px rgba(0, 0, 0, 0.02808), -0.102617px 0.220491px 16.7232px rgba(0, 0, 0, 0.02192), -0.0229537px 0.0493202px 7.2384px rgba(0, 0, 0, 0.01384);">
                        <div class="card-title text-center">
                            <h2 class="p-3 ">Actualizar estatus de la mercancía</h2>
                        </div>
                        <div class="card-body ">
                            <form action="/statusUpdate/<%= id %>" method="POST">
                                <% if(typeof results1 !="undefined"  ) { %>
                                <div class="mb-3 ">
                                    <h5 for="usuario ">AWB de la mercancía</h5>
                                    <input type="text " class="form-control" name="AWB" value="<%= results3[0].awb %>">
                                </div>
                                <div class="mb-3 ">
                                    <h5 for="usuario ">HAWB de la mercancía</h5>
                                    <input type="text " class="form-control" name="HAWB" value="<%= results3[0].hawb %>">
                                </div>
                                <div class="mb-3 ">
                                    <h5 for="usuario">Estatus</h5>
                                    <select class="form-select" aria-label="Default select example" name="status" >
                                        <% data.forEach((Data)=> {%>
                                            <option>
                                                <%= Data.name%>
                                            </option>
                                            <% }) %>
                                      </select>
                                </div>    
                                <div class="mb-3 ">
                                    <h5 for="usuario ">fecha actualización</h5>
                                    <input type="date" class="form-control" name="fecha" required value="<%= results3[0].fecha %>">
                                </div>     
                                <div class="mb-3 ">
                                    <h5 for="usuario ">observaciones</h5>
                                    <textarea class="form-control" type="text" class="form-control" name="observaciones" required value="<%= results1[0].observaciones %>"></textarea>
                                </div>         
                                             
                            <% } %>  
                        </div>
                        <div class="card-body ">
                            <form action="/statusUpdate/<%= id %>" method="POST">
                                <% if(typeof results2 !="undefined"  ) { %>
                                    <input type="hidden" value="<%= results2[0].id%>" name="id">
                                <div class="mb-3 ">
                                    <h5 for="usuario ">AWB de la mercancía</h5>
                                    <input type="text " class="form-control" name="AWB"  id="buscador" value="<%= results2[0].awb %>">
                                </div>
                                <div class="mb-3 ">
                                    <h5 for="usuario ">HAWB de la mercancía</h5>
                                    <input type="text " class="form-control" name="HAWB" id="buscador2" value="<%= results2[0].hawb %>">
                                </div>
                                <div class="mb-3 ">
                                    <h5 for="usuario">Estatus</h5>
                                    <select class="form-select" aria-label="Default select example" name="status">
                                        <% data.forEach((Data)=> {%>
                                            <option>
                                                <%= Data.name%>
                                            </option>
                                            <% }) %>
                                      </select>
                                </div>
                              
                                <div class="mb-3 ">
                                    <h5 for="usuario ">fecha y hora actualización</h5>
                                    <input type="datetime-local" class="form-control" name="fecha" required value="<%= results2[0].fecha %>">
                                </div>       
                                <div class="mb-3 ">
                                    <h5 for="usuario ">observaciones</h5>
                                    <textarea class="form-control" type="text" class="form-control" name="observaciones" required></textarea>
                                </div>              
                            <% } %>  
                        </div>
                        <div class="d-grid ">
                            <button type="submit" class="btn btn-primary" style="background: #000e7c;">cambiar estatus de la mercancía</button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.slim.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
<script>
  $("#buscador").bind('keypress', function(event) {
  var regex = new RegExp("^[a-zA-Z0-9 ]+$");
  var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
  if (!regex.test(key)) {
    event.preventDefault();
    return false;
 }
});
$("#buscador2").bind('keypress', function(event) {
  var regex = new RegExp("^[a-zA-Z0-9 ]+$");
  var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
  if (!regex.test(key)) {
    event.preventDefault();
    return false;
 }
});
</script>
        
        <script src=" //cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                                <% if(typeof alert !="undefined" ) { %>
                                    <script>
                                        Swal.fire({
                                            title: '<%=alertTitle %>',
                                            text: '<%= alertMessage%>',
                                            icon: '<%=alertIcon %>',
                                            showConfirmButton: '<%= showConfirmButton %>',
                                            timer: '<%= timer %>'
                                        }).then(() => {
                                            window.location = '/<%= ruta %>'
                                        })
                                    </script>
                                    <% } %>
                                        <script type="text/javascript">
                                            function mostrarPassword() {
                                                var cambio = document.getElementById("txtPassword");
                                                if (cambio.type == "password") {
                                                    cambio.type = "text";
                                                    $('.icon').removeClass('fa fa-eye-slash').addClass('fa fa-eye');
                                                } else {
                                                    cambio.type = "password";
                                                    $('.icon').removeClass('fa fa-eye').addClass('fa fa-eye-slash');
                                                }
                                            }
                                            $(document).ready(function () {
                                                //CheckBox mostrar contraseña
                                                $('#ShowPassword').click(function () {
                                                    $('#Password').attr('type', $(this).is(':checked') ? 'text' : 'password');
                                                });
                                            });
                                        </script>
                                        <script>
                                            var inputs = $("input[type=text]");
                                            for (var i = 0; i < inputs.length; i++) {
                                                var aux = $(inputs[i]).val().trim();
                                                $(inputs[i]).val(aux);
                                            }
                                        </script>





<%- include('./partials/footer.ejs') %> 