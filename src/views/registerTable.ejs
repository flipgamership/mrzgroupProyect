<%- include('./partials/nav.ejs') %>


  
   <div class="container">
    <div class="row" style="background: #eeeeee;padding: 30px;">
        <h1 class="text-center">Lista de usuarios</h1>
        <div class="row">
          <a href="/register" style="margin-bottom: 10px; margin-left: 8px;background-color: #F57800;"  class="btn col-md-2 text-light
            type="button"> <i class='bx bx-user-plus bx-sm'></i>registrar usuario</a>
        </div>
        <table id="table" class="table  dt-responsive nowrap table table-light  table-hover table-bordered"
          style="width:100%">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Email</th>
              <th>cedula</th>
              <th>teléfono</th>
              <th>nivel de acceso</th>
              <th>administrar datos</th>
            </tr>
          </thead>
          <tbody>
            <% results.forEach((user)=> {%>
              <tr>
                <td>
                  <%= user.nombre %>
                </td>
                <td>
                  <%= user.correo %>
                </td>
                <td>
                  <%= user.warrant%>
                </td>
                <td>
                  <%= user.telefono %>
                </td>
                <td>
                  <%= user.role %>
                </td>
                <td>
                  <a href="/registerUsersEdit/<%= user.id %>" style="background: #F57800; color:white;"
                    class="btn btn-warning" type="button"><i class='bx bx-pencil'></i></a>
  
                  <a onclick="alertDelate('<%= user.id %>')" class="btn btn-dark" type="button"><i
                      class='bx bx-block'></i></a>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>
  
      </div>
    </div>
   </div>
   

  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.slim.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.4/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.9/js/responsive.bootstrap5.min.js"></script>
  <script>
    // $(document).ready(function () {
    //   $('#table').DataTable({
    //     responsive: true
    //   });
    // });
    $(document).ready(function () {
      $('#table').DataTable({
        responsive: true,
        fixedHeader: true,
        scrollX: true,
        searching: true,
        dom: 'Bfrtip',
        buttons: [],
        pageLength: 10,
        language: {
          search: 'Buscar',
          zeroRecords: 'No hay registros para mostrar.',
          emptyTable: 'La tabla está vacia.',
          info: "Mostrando _START_ de _END_ de _TOTAL_ Registros.",
          infoFiltered: "(Filtrados de _MAX_ Registros.)",
          paginate: {
            first: 'Primero',
            previous: 'Anterior',
            next: 'Siguiente',
            last: 'Último'
          }
        }
      });
    });
  </script>
  <script>
    $(document).ready(function () {
      $('#area').DataTable({
        fixedHeader: true,
        scrollX: true,
        searching: true,
        dom: 'Bfrtip',
        buttons: [],
        pageLength: 4,
        language: {
          search: 'Buscar',
          zeroRecords: 'No hay registros para mostrar.',
          emptyTable: 'La tabla está vacia.',
          info: "Mostrando _START_ de _END_ de _TOTAL_ Registros.",
          infoFiltered: "(Filtrados de _MAX_ Registros.)",
          paginate: {
            first: 'Primero',
            previous: 'Anterior',
            next: 'Siguiente',
            last: 'Último'
          }
        }
      });
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.all.min.js"></script>
  <script>
    function alertDelate(id) {
      Swal.fire({
        title: '¿Quieres Bloquear este usuario?',
        icon: 'warning',
        showCancelButton: true,
        cancelButtonText: 'NO',
        cancelButtonColor: '#d33',
        confirmButtonColor: '#3085d6',
        confirmButtonText: ` SI `,
      }).then((result) => {
        /* Read more about isConfirmed, isDenied below */
        if (result.isConfirmed) {
          Swal.fire('Usuario Bloqueado exitosamente', '', 'success', 1500)
          const value = true
          setTimeout(timeUot, 2000, value, id);
        }
      })
    }
    function timeUot(values, id) {
      if (values) {
        window.location = '/registerUsersDelate/' + id
      }
    }
    function alertDelate2(id) {
      Swal.fire({
        title: '¿Quieres borrar este departamento?',
        icon: 'warning',
        showCancelButton: true,
        cancelButtonText: 'NO',
        cancelButtonColor: '#d33',
        confirmButtonColor: '#3085d6',
        confirmButtonText: ` SI `,
      }).then((result) => {
        /* Read more about isConfirmed, isDenied below */
        if (result.isConfirmed) {
          Swal.fire('departamento borrado exitosamente', '', 'success', 1500)
          const value = true
          setTimeout(timeUot, 2000, value, id);
        }
      })
    }
    function timeUot(values, id) {
      if (values) {
        window.location = '/delateDepartementos/' + id
      }
    }
  </script>

  <%- include('./partials/footer.ejs') %>

    <script src="https://unpkg.com/boxicons@2.0.9/dist/boxicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"></script>
    </body>


    </html>